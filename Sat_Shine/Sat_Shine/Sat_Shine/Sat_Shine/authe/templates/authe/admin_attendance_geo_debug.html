{% extends 'main/base.html' %}

{% block title %}Map Debug - SAT-SHINE{% endblock %}

{% block content %}
<div style="padding: 20px;">
    <h2>Map Debug Page</h2>
    <p>Selected Date: {{ selected_date }}</p>
    <p>Status Filter: {{ status_filter }}</p>
    
    <div id="debug-info" style="background: #f0f0f0; padding: 15px; margin: 20px 0;">
        <h4>Debug Information</h4>
        <p>Template loaded successfully!</p>
        <p>Selected Date: {{ selected_date }}</p>
        {% if debug_info %}
            <p>Total Attendance Records: {{ debug_info.total_attendance }}</p>
            <p>Records with Location: {{ debug_info.with_location }}</p>
        {% endif %}
        <button onclick="testGeoAPI()">Test Geo API</button>
        <div id="api-result" style="margin-top: 10px;"></div>
    </div>
    
    <div style="height: 400px; background: #e0e0e0; border: 2px dashed #999; display: flex; align-items: center; justify-content: center;">
        <p>Map container placeholder - OpenLayers will load here</p>
    </div>
</div>

<script>
function testGeoAPI() {
    fetch('{% url "admin_attendance_geo_data" %}')
        .then(response => response.json())
        .then(data => {
            document.getElementById('api-result').innerHTML = 
                '<strong>API Response:</strong><br>' + 
                JSON.stringify(data, null, 2);
        })
        .catch(error => {
            document.getElementById('api-result').innerHTML = 
                '<strong>API Error:</strong><br>' + error.message;
        });
}
</script>
{% endblock %}